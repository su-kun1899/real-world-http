# Real World HTTP 読書ログ

## １章 HTTP/1.0のシンタックス：基本となる４つの要素

- HTTPの基本要素
  - メソッドとパス
  - ヘッダー
  - ボディ
- (1990) HTTP/0.9
  - シンプル
  - 現行との後方互換性はない
  - ボディの受信とパスだけ
- (1992) HTTP/1.0の前身
  - リクエスト
    - メソッドの追加
    - リクエスト時のHTTPバージョンの追加
    - ヘッダーの追加
    - リクエストにもコンテンツを含められる
      - メソッドによっては無視すべきものも
  - レスポンス
    - HTTPバージョンの追加
    - ステータスコードの追加
    - レスポンスヘッダの追加

### HTTPの仕様

- RFC: HTTPのルール文書
- IETF: RFCを作っている団体
- IANA: Webに関するデータベースを管理する団体
  - ポート番号やContent-type
- W3C: ウェブ周りの標準化団体
- WHATWG: ウェブ周りの企画を議論する団体
  - 🤔 W3Cと対立？
- 🤔 RFCとW3Cを参照するのが基本なのかな

## ヘッダ

- メールと同じ形式のヘッダ
  - フィールド名: 値
- リクエストヘッダ
  - User-Agent: クライアントアプリケーション名
  - Referer: リクエスト時に見ていたページのURL
  - Autorizaton: 認証情報
- レスポンス
  - Content-Type: ファイルの種類（MIMEタイプ）
  - Content-Length: ボディのサイズ
  - Content-Encoding: 圧縮されてる場合の圧縮形式
  - Date: ドキュメントの日時
- `X-` から始まるヘッダーは各アプリケーションが自由に使っていい
- IANAで登録済ヘッダーの一覧が見られる
- 同じヘッダは複数送れる
  - プログラミング言語やフレームワークに寄って正規化の方法等が異なるため、注意が必要

### メソッド

- GET: ヘッダーとコンテンツを要求
- HEAD: ヘッダーのみを要求
- POST: 新しいドキュメントを投稿
- PUT: 既存のドキュメントを更新
- DELETE: ドキュメントの削除
- 😇 いなくなったメソッドもいっぱい

### ステータスコード

- 100番台: 処理中
- 200番台: 成功
- 300番台: 正常処理としての命令。リダイレクトやキャッシュの利用など
  - 😳 ログイン後のページ遷移は303なのか
- 400番台: リクエスト不正
- 500番台: サーバー側のエラー

### URL

- 😵 URI/URNよく分からん
  - URLはドキュメントなどリソースの場所を特定する手段を提供する（住所
  - WebのシステムではURLとURIはほぼ同一
  - 😵 URLって言っておけばいいかな。。
- URLの構造: `スキーマ://ユーザ:パスワード@ホスト名:ポート/パス#フラグメント?クエリ`
- 仕様上長さ制限はないがIE/Edgeの制限あり
  - 2000文字が目安
  - `414 URI Too Long` がある
- 🐷 ﾌﾟﾆｺｰﾄﾞ

### その他

- ニュースグループという思い出（知らん
- `X-Content-Type-Options: nosniff` を使うとブラウザにContent-Typeの推測をさせなくできる
- curl、`-d @ファイル名` でファイルの中身をリクエストボディにできるのか



